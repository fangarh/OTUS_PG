# Домашняя работа №2
### Тема "Установка PostgreSQL"

> создать ВМ с Ubuntu 20.04/22.04 или развернуть докер любым удобным способом <br>
> поставить на нем Docker Engine<br>
> сделать каталог /var/lib/postgres 

Для опытов создана еще папка /var/lib/pg_docler 

![имг00](IMG/00.png "шаг 1")

> развернуть контейнер с PostgreSQL 15 смонтировав в него /var/lib/postgresql

Развернут контейнер с сервером PG. Прокинут порт на новый: 5434<br>
Папка с тэйблспэйсами примонтирована к папке VM **/var/lib/pg_docler**

![имг01](IMG/01.png "шаг 2")

> развернуть контейнер с клиентом postgres<br>
> подключится из контейнера с клиентом к контейнеру с сервером и сделать таблицу с парой строк<br>
> подключится к контейнеру с сервером с ноутбука/компьютера извне инстансов GCP/ЯО/места установки докера<br>

Установлено соединение с сервером в докере через контейнер клиент. Создана таблица с данными

![имг02](IMG/02_0.png "шаг 2")

Проброшены порты для NAT сети в VirtualBox

![имг02](IMG/02_1.png "шаг 2")

Установлено подключение к серверу-контейнеру с ноутбука где хостится VM

![имг02](IMG/02_2.png "шаг 2")

![имг02](IMG/02_3.png "шаг 2")

> удалить контейнер с сервером

![имг03](IMG/03_0.png "шаг 3")

![имг03](IMG/03_1.png "шаг 3")

> создать его заново<br>
> подключится снова из контейнера с клиентом к контейнеру с сервером<br>
> проверить, что данные остались на месте<br>

Переустановлен контейнер

![имг04](IMG/04.png "шаг 3")

Произведено подключение из вне. 

![имг04](IMG/04_1.png "шаг 3")
<br>
Данные сохранились, т.к. тэйблспэйсы создавались в созданной изначально папке **/var/lib/pg_docler** <br>
При удалении контейнера, примонтированные папки не очищаются.<br><br>